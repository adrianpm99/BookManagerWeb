<o-form  label-header="LENDING RETURN (INSERT DATA IN THE ANNOTATIONS FIELD)" show-title="true"
service="lendings" entity="lending" keys="LENDINGID" parent-keys = "LENDINGID" insert-button="no"
refresh-button="no" detail-mode="none" delete-button="no"(onUpdate) = "closeLending()"  >
  <o-text-input attr="LENDINGID" sql-type="INTEGER" enabled="no"></o-text-input>

  <o-column title-label="LENDING_INFORMATION" fxFlex>
    <o-row>
      <o-date-input attr="LENDINGDATE" read-only ="yes" required="yes"></o-date-input>
    </o-row>
    <o-row>
      <o-date-input attr="LENDINGDEADLINE" read-only="yes" required="yes"></o-date-input>
    </o-row>
    <o-row>
      <o-date-input #lendingReturnDate attr="LENDINGRETURNDATE" read-only="yes" required="yes"></o-date-input>
    </o-row>
    <o-row>
      <o-text-input attr="LENDINGNOTES" read-only="no" fxFlex max-length="200"></o-text-input>
    </o-row>
  </o-column>

  <o-table fxFlex attr="listCopies" title="COPIES_LIST" service="lendings" entity="copiesFromLending"
    keys="LENDINGID" columns="LENDINGID;COPYID;COPYCODE;COPYNOTES;BOOKTITLE" parent-keys="LENDINGID"
    visible-columns="COPYCODE;BOOKTITLE;COPYNOTES" show-title="true" insert-button="no"
    refresh-button="no" detail-mode="none" delete-button="no" query-rows="20" quick-filter ="false">
  </o-table>
  <br>
  <o-form-layout-manager mode="dialog">
    <div fxFlex>
      <o-table fxFlex attr="reservationsCurrent" title="LIST OF FIRST RESERVATIONS OF THE LENDING COPIES"
      service="reservations" entity="reservationCurrent" keys="RESERVATIONID"
        columns="RESERVATIONID;COPYCODE;BOOKTITLE;CUSTOMERNAME;CUSTOMERSURNAME"
        visible-columns="RESERVATIONID;COPYCODE;BOOKTITLE;CUSTOMERNAME;CUSTOMERSURNAME"
        query-rows="20" quick-filter="false" export-button="false" delete-button="false" refresh-button="false"
        show-title="true" parent-keys="LENDINGID" insert-button="false" >
        <o-table-column attr="RESERVATIONID" title="RESERVATIONID" width="50px"></o-table-column>
      </o-table>
    </div>
  </o-form-layout-manager>

</o-form>

